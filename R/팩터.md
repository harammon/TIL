# 팩터

### 1. 개념

- 팩터는 **범주형 자료**를 다루는 데 사용된다.

*범주형 자료 : 어떠한 종류를 나타내는 값*

- 팩터는 이미 지정된 값의 종류 외에 다른 값이 들어오는 것을 막는다.
  - 정해진 값 이외의 값이 들어오면, 경고 메시지와 함께 **NA** 값이 저장된다.

<br/><br/>

### 2. 생성

- 팩터는 문자형 백터를 만든 다음 `factor()`함수를 이용해 변환하여 만든다.

~~~R
bt <- c('A','B', 'B', 'B', 'AB', 'AB','O')
bt.new <- factor(bt)

> bt
[1] "A" "B" "B" "B" "AB" "AB" "O"

> bt.new
[1] A B B B AB AB O
Levels: A AB B O

> bt[5]
[1] AB
Levels: A AB B O
~~~

- 벡터 bt의 내용을출력하면 따옴표로 묶여 있느 문자값들이 출력된다.
- 그런데, 팩터 bt.new를 출력하면, **따옴표가 없는 문자값**들이 출력된다.
- 또한, `Levels: A AB B O`가 붙어있는데,  이것의 의미는 bt.new에 저장된 **종류**를 나타내는 것이다.
- 팩터는 하나의 값을 추출하여 출력해도, 전체 팩터에 저장된 값들의 종류 정보를 함께 표시해준다.

-> 팩터의 목적이 어떤 종류를 나타내는 문자값을 저장하는 것이기 때문에, **종류 정보**를 자동으로 보여준다.

<br/>

- levels 매개변수를 통해 범주를 미리 정해주어야, 나중에 데이터 삽입이 가능하다.

~~~R
data <- c("월","수","토","월", "수", "화", "수", "수", "목", "화")
week.korabbname <- c("일", "월", "화", "수", "목", "금", "토")
day <- factor(data, levels=week.korabbname)
~~~

- labels 매개변수를 통해 지정한 levels의 순서에 맞는 label을 지정할 수 있다.
  - 팩터 내에서 모든 출력은 **label**이 적용된다.

~~~R
gender <- factor(c(1,2,1,1,1,2,1,2), 
                 levels=c(1,2), 
                 labels=c("남성", "여성"))

> gender
[1] 남성 여성 남성 남성 남성 여성 남성 여성
Levels: 남성 여성

> summary(gender)
남성 여성 
 5    3 
~~~

<br/>

<br/>

### 3. 주요 함수

- levels()
  - 팩터에 저장된 값들의 종류를 알아내는 함수

~~~R
bt <- c('A','B', 'B', 'B', 'AB', 'AB','O')
bt.new <- factor(bt)

> levels(bt.new)
[1] "A" "AB" "B" "O"
~~~

- as.integer()

  - 저장된 문자값을 숫자로 바꾸어주는 함수
  - 숫자로의 전환에는 정해진 **규칙**이 존재한다.

  -> **levels() 함수를 통해 출력된 문자값들의 순서가 바로 변환될 숫자!!**

~~~r
bt <- c('A','B', 'B', 'B', 'AB', 'AB','O')
bt.new <- factor(bt)

> as.integer(bt.new)
[1] 1 3 3 3 2 2 4
~~~

<br/><br/>

### 4. 벡터와의 비교

- 범주형 자료의 저장에 이용된다.
- factor() 함수로 생성한다.
- 저장되는 값들에 따옴표가 표시되지 않는다.
- 팩터의 내용을 출력하면 Levels 옆에 저장되어 있는 값들의 종류가 표시된다.
- levels() 함수로 값들의 종류를 알아낼 수 있다.
- Levels() 옆에 표시되는 값들 외에 다른 값은 추가하여 저장할 수 없다.
- `summary()`의 출력 결과에 차이가 있다.

~~~R
# vector
score <- c(1,3,2,4,2,1,3,5,1,3,3,3)

> class(score)
[1] "numeric"

> summary(score)
 Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
1.000   1.750   3.000   2.583   3.000   5.000 


# factor
f_score <- factor(score)

> class(f_score)
[1] "factor"

> summary(f_score)		# 각 원소에 해당하는 값이 몇 개 들어있는지 요약 정보 제공
1 2 3 4 5 
3 2 5 1 1
~~~

- factor를 plot()하면, 막대그래프를 출력한다.

<br/>
<br/>
[출처]<br/>

오세종, 신현석 『난생 처음 R코딩&데이터 분석』, 한빛미디어(2021), p135-138.
